{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./demo/index.js","webpack:///external {\"commonjs\":\"ringcentral-web-phone\",\"commonjs2\":\"ringcentral-web-phone\",\"amd\":\"ringcentral-web-phone\",\"root\":[\"RingCentral\",\"WebPhone\"]}"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","SIP","getStats","$","jQuery","SDK","WebPhone","RingCentral","$form","$authForm","$server","$appKey","$appSecret","$login","$ext","$password","$logLevel","sdk","platform","webPhone","logLevel","username","extension","$app","$loginTemplate","$authFlowTemplate","$callTemplate","$incomingTemplate","$acceptedTemplate","remoteVideoElement","document","getElementById","localVideoElement","cloneTemplate","$tpl","html","postLogin","server","appKey","appSecret","login","ext","password","ll","localStorage","setItem","then","res","json","console","log","post","sipInfo","transport","register","makeCallForm","catch","e","error","stack","getItem","audioHelper","enabled","parseInt","appName","appVersion","media","remote","local","enableQos","userAgent","loadAudio","incoming","outgoing","setVolume","on","onInvite","arguments","session","request","to","displayName","friendlyName","from","$modal","modal","backdrop","find","css","accept","onAccepted","reject","toVoicemail","preventDefault","stopPropagation","forward","val","trim","replyWithMessage","replyType","replyText","$info","eq","$dtmf","$transfer","$flip","interval","setInterval","time","startTime","Math","round","Date","now","text","JSON","stringify","close","clearInterval","ua","volume","mute","unmute","hold","unhold","startRecord","stopRecord","park","transfer","newSession","invite","once","warmTransfer","flip","dtmf","terminate","$number","$homeCountry","$username","$logout","contact","firstName","lastName","company","unregister","location","reload","number","homeCountryId","regionalSettings","homeCountry","id","fromNumber","empty","append","sandbox","match","replace","$redirectUri","decodeURIComponent","href","split","redirectUri","loginUrl","loginWindow","url","show3LeggedLogin","undefined"],"mappings":"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","file":"demo.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([37,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","const SIP = require('sip.js');\nconst getStats = require('getstats');\nconst $ = require('jquery');\n\nwindow.jQuery = $;\nwindow.getStats = getStats;\nwindow.SIP = SIP;\n\n$(function() {\n    const bootstrap = require('bootstrap');\n    const SDK = require('ringcentral');\n    const WebPhone = require('ringcentral-web-phone') || window.RingCentral.WebPhone;\n\n    /** @type {SDK} */\n    var sdk = null;\n    var platform = null;\n    /** @type {WebPhone} */\n    var webPhone = null;\n\n    var logLevel = 0;\n    var username = null;\n    var extension = null;\n    var sipInfo = null;\n    var $app = $('#app');\n\n    var $loginTemplate = $('#template-login');\n    var $authFlowTemplate = $('#template-auth-flow');\n    var $callTemplate = $('#template-call');\n    var $incomingTemplate = $('#template-incoming');\n    var $acceptedTemplate = $('#template-accepted');\n\n    var remoteVideoElement = document.getElementById('remoteVideo');\n    var localVideoElement = document.getElementById('localVideo');\n\n    /**\n     * @param {jQuery|HTMLElement} $tpl\n     * @return {jQuery|HTMLElement}\n     */\n    function cloneTemplate($tpl) {\n        return $($tpl.html());\n    }\n\n    function login(server, appKey, appSecret, login, ext, password, ll) {\n        sdk = new SDK({\n            appKey: appKey,\n            appSecret: appSecret,\n            server: server\n        });\n\n        platform = sdk.platform();\n\n        // TODO: Improve later to support international phone number country codes better\n        if (login) {\n            login = login.match(/^[+1]/) ? login : '1' + login;\n            login = login.replace(/\\W/g, '');\n        }\n\n        platform\n            .login({\n                username: login,\n                extension: ext || null,\n                password: password\n            })\n            .then(function() {\n                return postLogin(server, appKey, appSecret, login, ext, password, ll);\n            })\n            .catch(function(e) {\n                console.error(e.stack || e);\n            });\n    }\n\n    // Redirect function\n    function show3LeggedLogin(server, appKey, appSecret, ll) {\n        var $redirectUri = decodeURIComponent(window.location.href.split('login', 1) + 'callback.html');\n\n        console.log('The redirect uri value :', $redirectUri);\n\n        sdk = new SDK({\n            appKey: appKey,\n            appSecret: appSecret,\n            server: server,\n            redirectUri: $redirectUri\n        });\n\n        platform = sdk.platform();\n\n        var loginUrl = platform.loginUrl();\n\n        platform\n            .loginWindow({url: loginUrl}) // this method also allows to supply more options to control window position\n            .then(platform.login.bind(platform))\n            .then(function() {\n                return postLogin(server, appKey, appSecret, '', '', '', ll);\n            })\n            .catch(function(e) {\n                console.error(e.stack || e);\n            });\n    }\n\n    function postLogin(server, appKey, appSecret, login, ext, password, ll) {\n        logLevel = ll;\n        username = login;\n\n        localStorage.setItem('webPhoneServer', server || '');\n        localStorage.setItem('webPhoneAppKey', appKey || '');\n        localStorage.setItem('webPhoneAppSecret', appSecret || '');\n        localStorage.setItem('webPhoneLogin', login || '');\n        localStorage.setItem('webPhoneExtension', ext || '');\n        localStorage.setItem('webPhonePassword', password || '');\n        localStorage.setItem('webPhoneLogLevel', logLevel || 0);\n\n        return platform\n            .get('/restapi/v1.0/account/~/extension/~')\n            .then(function(res) {\n                extension = res.json();\n\n                console.log('Extension info', extension);\n\n                return platform.post('/client-info/sip-provision', {\n                    sipInfo: [\n                        {\n                            transport: 'WSS'\n                        }\n                    ]\n                });\n            })\n            .then(function(res) {\n                return res.json();\n            })\n            .then(register)\n            .then(makeCallForm)\n            .catch(function(e) {\n                console.error('Error in main promise chain');\n                console.error(e.stack || e);\n            });\n    }\n\n    function register(data) {\n        sipInfo = data.sipInfo[0] || data.sipInfo;\n\n        webPhone = new WebPhone(data, {\n            appKey: localStorage.getItem('webPhoneAppKey'),\n            audioHelper: {\n                enabled: true\n            },\n            logLevel: parseInt(logLevel, 10),\n            appName: 'WebPhoneDemo',\n            appVersion: '1.0.0',\n            media: {\n                remote: remoteVideoElement,\n                local: localVideoElement\n            },\n            enableQos: true\n        });\n\n        webPhone.userAgent.audioHelper.loadAudio({\n            incoming: 'audio/incoming.ogg',\n            outgoing: 'audio/outgoing.ogg'\n        });\n\n        webPhone.userAgent.audioHelper.setVolume(0.3);\n        webPhone.userAgent.on('invite', onInvite);\n        webPhone.userAgent.on('connecting', function() {\n            console.log('UA connecting');\n        });\n        webPhone.userAgent.on('connected', function() {\n            console.log('UA Connected');\n        });\n        webPhone.userAgent.on('disconnected', function() {\n            console.log('UA Disconnected');\n        });\n        webPhone.userAgent.on('registered', function() {\n            console.log('UA Registered');\n        });\n        webPhone.userAgent.on('unregistered', function() {\n            console.log('UA Unregistered');\n        });\n        webPhone.userAgent.on('registrationFailed', function() {\n            console.log('UA RegistrationFailed', arguments);\n        });\n        webPhone.userAgent.on('message', function() {\n            console.log('UA Message', arguments);\n        });\n\n        return webPhone;\n    }\n\n    function onInvite(session) {\n        console.log('EVENT: Invite', session.request);\n        console.log('To', session.request.to.displayName, session.request.to.friendlyName);\n        console.log('From', session.request.from.displayName, session.request.from.friendlyName);\n\n        var $modal = cloneTemplate($incomingTemplate).modal({\n            backdrop: 'static'\n        });\n\n        $modal.find('.answer').on('click', function() {\n            $modal.find('.before-answer').css('display', 'none');\n            $modal.find('.answered').css('display', '');\n            session\n                .accept()\n                .then(function() {\n                    $modal.modal('hide');\n                    onAccepted(session);\n                })\n                .catch(function(e) {\n                    console.error('Accept failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.decline').on('click', function() {\n            session.reject();\n        });\n\n        $modal.find('.toVoicemail').on('click', function() {\n            session.toVoicemail();\n        });\n\n        $modal.find('.forward-form').on('submit', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session\n                .forward(\n                    $modal\n                        .find('input[name=forward]')\n                        .val()\n                        .trim()\n                )\n                .then(function() {\n                    console.log('Forwarded');\n                    $modal.modal('hide');\n                })\n                .catch(function(e) {\n                    console.error('Forward failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.reply-form').on('submit', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session\n                .replyWithMessage({\n                    replyType: 0,\n                    replyText: $modal.find('input[name=reply]').val()\n                })\n                .then(function() {\n                    console.log('Replied');\n                    $modal.modal('hide');\n                })\n                .catch(function(e) {\n                    console.error('Reply failed', e.stack || e);\n                });\n        });\n\n        session.on('rejected', function() {\n            $modal.modal('hide');\n        });\n    }\n\n    function onAccepted(session) {\n        console.log('EVENT: Accepted', session.request);\n        console.log('To', session.request.to.displayName, session.request.to.friendlyName);\n        console.log('From', session.request.from.displayName, session.request.from.friendlyName);\n\n        var $modal = cloneTemplate($acceptedTemplate).modal();\n\n        var $info = $modal.find('.info').eq(0);\n        var $dtmf = $modal.find('input[name=dtmf]').eq(0);\n        var $transfer = $modal.find('input[name=transfer]').eq(0);\n        var $flip = $modal.find('input[name=flip]').eq(0);\n\n        var interval = setInterval(function() {\n            var time = session.startTime ? Math.round((Date.now() - session.startTime) / 1000) + 's' : 'Ringing';\n\n            $info.text('time: ' + time + '\\n' + 'startTime: ' + JSON.stringify(session.startTime, null, 2) + '\\n');\n        }, 1000);\n\n        function close() {\n            clearInterval(interval);\n            $modal.modal('hide');\n        }\n\n        $modal.find('.increase-volume').on('click', function() {\n            session.ua.audioHelper.setVolume(\n                (session.ua.audioHelper.volume !== null ? session.ua.audioHelper.volume : 0.5) + 0.1\n            );\n        });\n\n        $modal.find('.decrease-volume').on('click', function() {\n            session.ua.audioHelper.setVolume(\n                (session.ua.audioHelper.volume !== null ? session.ua.audioHelper.volume : 0.5) - 0.1\n            );\n        });\n\n        $modal.find('.mute').on('click', function() {\n            session.mute();\n        });\n\n        $modal.find('.unmute').on('click', function() {\n            session.unmute();\n        });\n\n        $modal.find('.hold').on('click', function() {\n            session\n                .hold()\n                .then(function() {\n                    console.log('Holding');\n                })\n                .catch(function(e) {\n                    console.error('Holding failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.unhold').on('click', function() {\n            session\n                .unhold()\n                .then(function() {\n                    console.log('UnHolding');\n                })\n                .catch(function(e) {\n                    console.error('UnHolding failed', e.stack || e);\n                });\n        });\n        $modal.find('.startRecord').on('click', function() {\n            session\n                .startRecord()\n                .then(function() {\n                    console.log('Recording Started');\n                })\n                .catch(function(e) {\n                    console.error('Recording Start failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.stopRecord').on('click', function() {\n            session\n                .stopRecord()\n                .then(function() {\n                    console.log('Recording Stopped');\n                })\n                .catch(function(e) {\n                    console.error('Recording Stop failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.park').on('click', function() {\n            session\n                .park()\n                .then(function() {\n                    console.log('Parked');\n                })\n                .catch(function(e) {\n                    console.error('Park failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.transfer-form').on('submit', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session\n                .transfer($transfer.val().trim())\n                .then(function() {\n                    console.log('Transferred');\n                })\n                .catch(function(e) {\n                    console.error('Transfer failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.transfer-form button.warm').on('click', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session.hold().then(function() {\n                var newSession = session.ua.invite($transfer.val().trim());\n\n                newSession.once('accepted', function() {\n                    session\n                        .warmTransfer(newSession)\n                        .then(function() {\n                            console.log('Transferred');\n                        })\n                        .catch(function(e) {\n                            console.error('Transfer failed', e.stack || e);\n                        });\n                });\n            });\n        });\n\n        $modal.find('.flip-form').on('submit', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session\n                .flip($flip.val().trim())\n                .then(function() {\n                    console.log('Flipped');\n                })\n                .catch(function(e) {\n                    console.error('Flip failed', e.stack || e);\n                });\n            $flip.val('');\n        });\n\n        $modal.find('.dtmf-form').on('submit', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session.dtmf($dtmf.val().trim());\n            $dtmf.val('');\n        });\n\n        $modal.find('.hangup').on('click', function() {\n            session.terminate();\n        });\n\n        session.on('accepted', function() {\n            console.log('Event: Accepted');\n        });\n        session.on('progress', function() {\n            console.log('Event: Progress');\n        });\n        session.on('rejected', function() {\n            console.log('Event: Rejected');\n            close();\n        });\n        session.on('failed', function() {\n            console.log('Event: Failed');\n            close();\n        });\n        session.on('terminated', function() {\n            console.log('Event: Terminated');\n            close();\n        });\n        session.on('cancel', function() {\n            console.log('Event: Cancel');\n            close();\n        });\n        session.on('refer', function() {\n            console.log('Event: Refer');\n            close();\n        });\n        session.on('replaced', function(newSession) {\n            console.log('Event: Replaced: old session', session, 'has been replaced with', newSession);\n            close();\n            onAccepted(newSession);\n        });\n        session.on('dtmf', function() {\n            console.log('Event: DTMF');\n        });\n        session.on('muted', function() {\n            console.log('Event: Muted');\n        });\n        session.on('unmuted', function() {\n            console.log('Event: Unmuted');\n        });\n        session.on('connecting', function() {\n            console.log('Event: Connecting');\n        });\n        session.on('bye', function() {\n            console.log('Event: Bye');\n            close();\n        });\n    }\n\n    function makeCall(number, homeCountryId) {\n        homeCountryId =\n            homeCountryId ||\n            (extension &&\n                extension.regionalSettings &&\n                extension.regionalSettings.homeCountry &&\n                extension.regionalSettings.homeCountry.id) ||\n            null;\n\n        var session = webPhone.userAgent.invite(number, {\n            fromNumber: username,\n            homeCountryId: homeCountryId\n        });\n\n        onAccepted(session);\n    }\n\n    function makeCallForm() {\n        var $form = cloneTemplate($callTemplate);\n\n        var $number = $form.find('input[name=number]').eq(0);\n        var $homeCountry = $form.find('input[name=homeCountry]').eq(0);\n        var $username = $form.find('.username').eq(0);\n        var $logout = $form.find('.logout').eq(0);\n\n        $username.html(\n            '<dl>' +\n                '<dt>Contact</dt><dd>' +\n                extension.contact.firstName +\n                ' ' +\n                extension.contact.lastName +\n                '</dd>' +\n                '<dt>Company</dt><dd>' +\n                (extension.contact.company || '?') +\n                '</dd>' +\n                '<dt>Phone Number</dt><dd>' +\n                username +\n                '</dd>' +\n                '</dl>'\n        );\n\n        $logout.on('click', function(e) {\n            webPhone.userAgent.unregister();\n            e.preventDefault();\n            location.reload();\n        });\n\n        $number.val(localStorage.getItem('webPhoneLastNumber') || '');\n\n        $form.on('submit', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            localStorage.setItem('webPhoneLastNumber', $number.val() || '');\n\n            makeCall($number.val(), $homeCountry.val());\n        });\n\n        $app.empty().append($form);\n    }\n\n    function makeLoginForm() {\n        var $form = cloneTemplate($loginTemplate);\n        var $authForm = cloneTemplate($authFlowTemplate);\n\n        var $server = $authForm.find('input[name=server]').eq(0);\n        var $appKey = $authForm.find('input[name=appKey]').eq(0);\n        var $appSecret = $authForm.find('input[name=appSecret]').eq(0);\n        var $login = $form.find('input[name=login]').eq(0);\n        var $ext = $form.find('input[name=extension]').eq(0);\n        var $password = $form.find('input[name=password]').eq(0);\n        var $logLevel = $authForm.find('select[name=logLevel]').eq(0);\n\n        $server.val(localStorage.getItem('webPhoneServer') || SDK.server.sandbox);\n        $appKey.val(localStorage.getItem('webPhoneAppKey') || '');\n        $appSecret.val(localStorage.getItem('webPhoneAppSecret') || '');\n        $login.val(localStorage.getItem('webPhoneLogin') || '');\n        $ext.val(localStorage.getItem('webPhoneExtension') || '');\n        $password.val(localStorage.getItem('webPhonePassword') || '');\n        $logLevel.val(localStorage.getItem('webPhoneLogLevel') || logLevel);\n\n        $form.on('submit', function(e) {\n            console.log('Normal Flow');\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            login(\n                $server.val(),\n                $appKey.val(),\n                $appSecret.val(),\n                $login.val(),\n                $ext.val(),\n                $password.val(),\n                $logLevel.val()\n            );\n        });\n        //\n        $authForm.on('submit', function(e) {\n            console.log('Authorized Flow');\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            show3LeggedLogin($server.val(), $appKey.val(), $appSecret.val(), $logLevel.val());\n        });\n\n        $app.empty()\n            .append($authForm)\n            .append($form);\n    }\n\n    makeLoginForm();\n});\n","module.exports = undefined;"],"sourceRoot":""}